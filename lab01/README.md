# LAB01 

> #### Характеристики
>
> - MacOS 11.6.6 
> - x86/64
> - Parallels (2 виртуалки Ubuntu LTS)

### Настройки вложенной виртуализации в Parallels
1. Открыть настройки виртуальной машины
2. Открыть вкладку `Оборудование`
3. Открыть вкладку `ЦП и Память`
4. Открыть `Дополнительно`
5. Выбрать `Гипервизор Parallels`
6. Включить вложенную виртуализацию
7. Необходимо проделать шаги 1-6 для обоих ВМ

### Настройка первой ВМ
1. Войти в настройки первой ВМ
2. Добавить два сетевых адаптора (по умолчанию один уже должен быть)
3. Для превого сетевого адаптора необходимо выбрать источник `Host-Only`
4. Для второго сетевого адаптора необходимо выбрать источник мостовой сети по умолчанию
5. (Дополнительно) команда `arp -an` с MacOS (хостового устройства) должна выводить IP первой ВМ, т.к. она теперь находится в тойже локальной сети, что и хостовое устройство
6. (Дополнительно) команда `ip addr show` на ВМ должна показать ip адрес в локальной сети
7. Выполнить `sudo apt update`
8. Выполнить `sudo apt install nginx`
9. Добавить в файл `/etc/nginx/sites-enabled/default` строчку `proxy_pass http://<addr_vm2_lan>` в `lacation /` вместо `try_files ...`
10. `sudo service nginx restart`

### Настройка второй ВМ
1. Необходимо установить Apache. Выполняем `sudo apt update`, затем `sudo apt install apache2`
2. Отключить ВМ, войти в настройки второй ВМ
2. Добавить сетевой адаптор (по умолчанию уже должен быть)
3. Для сетевого адаптора необходимо выбрать источник `Host-Only`

### Проверка
1. Обратиться на хостовой машине к ВМ1
